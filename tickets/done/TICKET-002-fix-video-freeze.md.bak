# Ticket: TICKET-002-fix-video-freeze

## Context

The user reports that the generated video (approx 8MB) plays for about 3 seconds and then the visual/audio freezes ("everything got stuck"). This regression appeared after adding video effects (zoom/pan). Previously, simple concatenation worked fine.

## Design / Architecture

- **Investigation Area**: `VideoAssembler` and `FFmpegBuilder`.
- **Hypothesis**:
  - The video stream generated by the effect might be shorter than the audio.
  - The concatenation logic might be dropping frames or timestamp issues.
  - The `d=1` fix for Ken Burns might have side effects on the total duration of the clip if not handled correctly with `loop` or `t` (duration).

## Tasks & Tests

- [x] Analyze `VideoAssembler` and `FFmpegBuilder` logic for clip generation <!-- id: 1 -->
- [x] Debug the effect duration vs audio duration logic <!-- id: 2 -->
- [x] Fix the concatenation/effect application to ensure video matches audio duration <!-- id: 3 -->
- [x] Verify with a test run (or unit test on short clip) <!-- id: 4 -->

## Acceptance Criteria

- [x] Video plays smoothly for the full duration (30-40s) <!-- id: 5 -->
- [x] No freeze after 3 seconds <!-- id: 6 -->
